suite: test broker deployment
chart:
  version: 0.0.0
templates:
  - broker_deployment.yaml
  - broker_service.yaml
  - secrets.yaml
  - serviceaccount.yaml
values:
  - ./fixtures/default_values.yaml

tests:
  - it: default values
    asserts:
      - matchSnapshot: {}
  - it: HTTPS enabled
    values:
      - ./fixtures/enable_https.yaml
    asserts:
      - matchSnapshot: {}
  - it: preflight checks off
    values:
      - ./fixtures/disable_preflight.yaml
    asserts:
      - matchSnapshot: {}
  - it: HA mode on
    values:
      - ./fixtures/enable_ha.yaml
    asserts:
      - matchSnapshot: {}
  - it: HA mode on with 4 replicas
    values:
      - ./fixtures/enable_ha_replicacount.yaml
    asserts:
      - matchSnapshot: {}
